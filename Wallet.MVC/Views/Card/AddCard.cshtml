@model Wallet.DTO.Request.CardRequest

@{
    ViewData["Title"] = "Add Card";
}


<div class="bg-white p-8 rounded-lg shadow-md max-w-md mx-auto">
    <form asp-action="AddCard" method="post">
        @Html.AntiForgeryToken()
        <!-- Cardholder Name -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="CardHolderName">
                Cardholder Name
            </label>
            <input type="text" id="cardholder-name" name="CardHolderName" required
                   class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="John Smith">
        </div>

        <!-- Card Number -->
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="CardNumber">
                Card Number
            </label>
            <input type="text" id="card-number" name="CardNumber" required
                   class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="4256 7890 5678 4532">
        </div>

        <!-- Expiry Date -->

        <div class="mb-6">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="ExpiryDate">
                    Expiry Date
                </label>
            <input type="text" id="expiry-year" name="ExpiryDate" required placeholder="MM/YY" required pattern="\d{2}/\d{2}" title="Format: MM/YY"
                       class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="2020">
            </div>


        <!-- CVV -->
        <div class="mb-6">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="CVV">
                CVV
            </label>
            <input type="text" id="cvc" name="CVV" required
                   class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="145">
        </div>

        <!-- Submit Button -->
        <button type="submit" class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
            Submit
        </button>
    </form>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const expirationDateInput = document.querySelector('input[name="ExpirationDate"]');

        expirationDateInput.addEventListener("input", function () {
            this.value = this.value.replace(/[^0-9\/]/g, '').replace(/(\..*)\./g, '$1'); // Only allow numbers and "/"
            if (this.value.length === 2 && !this.value.includes("/")) {
                this.value = this.value + "/";
            }
        });

        expirationDateInput.addEventListener("blur", function () {
            const regex = /^(0[1-9]|1[0-2])\/\d{2}$/;
            if (!regex.test(this.value)) {
                alert("Please enter a valid expiration date in MM/YY format.");
                this.focus();
            }
        });
    });
</script>